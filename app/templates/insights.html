
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Pasqual Valentina">
  <title>Forgont catalogue</title>

  <!-- Styles -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- Analytics and cookies -->
  <script src="assets/js/stats.js"></script>
  <script src="assets/js/matomo.js"></script>
  <script src="https://www.unibo.it/++resource++unibo.cookiebanner/unibo-cookies.min.js?v=20"></script>

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Amatic+SC:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Leaflet.js -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Leaflet MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Include Moment.js for Date Handling -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-moment/1.0.0/chartjs-adapter-moment.min.js"></script>

  <style>
    #map {
      height: 400px; /* Adjust the height as needed */
      width: 100%; /* Optional, but helps for full-width layout */
    }

    #network {
      width: 800px;
      height: 600px;
      border: 1px solid lightgray;
    }
  </style>

</head>

<body class="index-page">

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">

      <a href="../" class="logo d-flex align-items-center me-auto me-lg-0">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1>Broast<span>.</span></h1>
      </a>

      <nav id="navbar" class="navbar">
        <ul>
          <li class="dropdown"><a href="#"><span>Broast in a nutshell</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
            <ul>
              <li><a href="#what_is">What is BROAST?</a></li>
              <li><a href="#insights">The collection insights</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Browse the collection</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
            <ul>
              <li><a href="/documents/">Documents catalogue</a></li>
              <li><a href="/scholars/">Scholars index</a></li>
              <li><a href="/publications/">Publications list</a></li>
              <!--<li class="dropdown"><a href="#"><span>Deep Drop Down</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
                <ul>
                  <li><a href="#">Deep Drop Down 1</a></li>
                  <li><a href="#">Deep Drop Down 2</a></li>
                  <li><a href="#">Deep Drop Down 3</a></li>
                  <li><a href="#">Deep Drop Down 4</a></li>
                  <li><a href="#">Deep Drop Down 5</a></li>
                </ul>
              </li>-->
            </ul>
          </li>
          <li><a href="#gallery">Knowledge Organisation</a></li>
        </ul>
      </nav><!-- .navbar -->

      <!-- <a class="btn-book-a-table" href="#book-a-table">Book a Table</a> -->
      <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
      <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>

    </div>

  </header><!-- End Header -->

  <!-- MAP  -->
  <section id="map_container" class="why-us section-bg  pt-5 mt-5">
    <div class="container pt-5 " data-aos="fade-up">
      <div class="row gy-4">
        <div class="col-lg-4 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
          <div class="why-box flex-grow-1 d-flex flex-column justify-content-between">
            <div>
              <h3>Alleged Places of Creation for the Documents: Authenticity in Question</h3>
              <p>A set og highlights on the collection</p>
            </div>
          </div>
        </div>
        <div class="col-lg-8 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
          <div class="flex-grow-1 d-flex flex-column justify-content-between">
            <div id="map"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TIME-CHART  -->
  <section id="map_container" class="why-us section-bg ">
    <div class="container" data-aos="fade-up">
      <div class="row gy-4">
        <div class="col-lg-8 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
          <div class="flex-grow-1 d-flex flex-column justify-content-between">
            <canvas id="chart"></canvas>
          </div>
        </div>
        <div class="col-lg-4 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
          <div class="why-box flex-grow-1 d-flex flex-column justify-content-between">
            <div>
              <h3>The Most Productive Centuries: A Debate Between Authenticity and Forgery</h3>
              <p>A set og highlights on the collection</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TRENDS-CHART  -->
  <section id="map_container" class="why-us section-bg ">
    <div class="container" data-aos="fade-up">
      <div class="row gy-4">
        <div class="col-lg-4 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
          <div class="why-box flex-grow-1 d-flex flex-column justify-content-between">
            <div>
              <h3>Scholalry opinions trends throught history</h3>
              <p>The chart shows the evolution of scholalry opinions towards the clafficiation of the documents in the collection.
                <br><br>
                The <i>x-axis</i> show the date of publication in which the scholalry opinion is stated 
                <br><br>
                The <i>y-axisis</i> show the Document ID in the collection
              </p>
            </div>
          </div>
        </div>
        <div class="col-lg-8 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
          <div class="flex-grow-1 d-flex flex-column justify-content-between">
            <canvas id="dateChart" width="1500" height="800"></canvas>
          </div>
        </div>
      </div>
    </div>
  </section>
  






<section id="insights" class="why-us section-bg">
  <div class="container" data-aos="fade-up">
    <div class="row gy-4">

      <!-- Forgont Insights Box -->
      <div class="col-lg-4 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
        <div class="why-box flex-grow-1 d-flex flex-column justify-content-between">
          <div>
            <h3>Collection Insights</h3>
            <p>A set og highlights on the collection</p>
            <ul>
            {% for query_data in queries %}
              <li class="m-2"><a href="#insight-{{loop.index}}" style="color:white">{{ query_data.title }}</a></li>
            {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <!-- Cards in a 2x2 Vertical Layout -->
      <div class="col-lg-8">
        <div class="row">
          {{query_data}}
          {% for query_data in queries %}
          <div class="col-md-6 mb-4 h-100" data-aos="fade-up" data-aos-delay="200">
            <div class="insight-box icon-box justify-content-center align-items-center h-100">
              <i class="bi bi-clipboard-data"></i>
              <h5 id="insight-{{loop.index}}">{{query_data.title}}</h5>
              <p>{{query_data.description}}</p>
              {% for el in query_data.results %}
                {% if 'result' in el %}
                  <div class="row">
                    <div class="col-md-10">
                        <p><a href="{{el.result.value|replace('https://w3id.org/broast/urk/','')}}">{{el.label.value}}</a></p>
                    </div>
                    <div class="col-md-2 text-end">
                        <span class="badge bg-secondary">{{el.n.value}}</span>
                    </div>
                  </div>   
                {% else %}    
                  <div class="row">
                    <div class="col-md-10">
                        <p>{{el.label.value}}</p>
                    </div>
                    <div class="col-md-2 text-end">
                        <span class="badge bg-secondary">{{el.n.value}}</span>
                    </div>
                  </div>  
                {% endif %}            
              {% endfor %}
              <div class="mt-2 accordion accordion-flush" id="accordionFlushInsight-{{loop.index}}">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingInsight-{{loop.index}}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseInsight-{{loop.index}}" aria-expanded="false" aria-controls="flush-collapseInsight-{{loop.index}}">
                      SPARQL query
                    </button>
                  </h2>
                  <div id="flush-collapseInsight-{{loop.index}}" class="accordion-collapse collapse" aria-labelledby="flush-headingInsight-{{loop.index}}" data-bs-parent="#accordionFlushInsight-{{loop.index}}">
                    <div class="accordion-body">
                      <pre>{{query_data.query}}</pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer id="footer" class="footer dark-background py-5">
  <div class="container">
      <div class="row gy-4">
          <div class="col-lg-6 col-md-6 d-flex align-items-start">
              <i class="bi bi-geo-alt icon fs-4 me-3"></i>
              <div class="address">
                  <h6 class="text-uppercase fw-bold">Contacts</h6>
                  <p class="mb-1">Digital Humanities Advanced Research Center (/DH.arc)</p>
                  <p class="mb-1">Dipartimento di Filologia Classica e Italianistica (FICLIT)</p>
                  <p class="mb-1">Via Zamboni 32</p>
                  <p class="mb-1">Università di Bologna</p>
                  <p class="mb-1">40126 Bologna, Italia</p>
                  <p>Email: <a href="mailto:dharc@live.unibo.it">dharc@live.unibo.it</a></p>
              </div>
          </div>

          <div class="col-lg-6 col-md-6 d-flex align-items-start">
              <i class="bi bi-info-circle icon fs-4 me-3"></i>
              <div class="info">
                  <h6 class="text-uppercase fw-bold">Info & Acknowledgments</h6>
                  <p class="mb-1">© 2024 Valentina Pasqual @ /DH.arc | Email: <a href="mailto:valentina.pasqual2@unibo.it">valentina.pasqual2@unibo.it</a> </p>
                  <p>The data for this study is sourced from the <i><a href="https://www.landesarchiv-ooe.at/ueber-uns/news/detail/neuerscheinung-verzeichnis-gefaelschte-urkunden" target="_blank"><b>Index of Medieval Documents Relating to the Upper Austrian Region that are Damaged, Tampered, or Altered</b></a></i>, thanks to the support of the author, <b>Siegfried Haider</b>, and the publisher <a href="https://www.landesarchiv-ooe.at/" target="_blank"><b>Oberösterreichisches Landesarchiv</b></a></p>
                  <p><a href="sparql" class="text-decoration-underline">SPARQL Endpoint</a></p>
                  <img alt="Licenza Creative Commons" class="img-fluid my-2" src="https://licensebuttons.net/l/by-nc/4.0/88x31.png">
              </div>
          </div>
      </div>
  </div>

<script>
    // Initialize map
    var map = L.map('map').setView([45.8503, 4.3517], 5); // Centered on Brussels, Belgium


    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Fetch and add marker clusters
    fetch('/map-data')
        .then(response => response.json())
        .then(data => {
            var markers = L.markerClusterGroup();
            data.forEach(function(marker) {
                var latLng = L.latLng(marker.lat, marker.lng);
                markers.addLayer(L.marker(latLng));
                
            });
            map.addLayer(markers);
        });

    // Initialize line chart
    fetch('/chart-data')
        .then(response => response.json())
        .then(data => {
            var ctx = document.getElementById('chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: data.datasets
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
</script>

<script>
let dateChart; // Variable to hold the date chart instance

function createDateChart(data) {
    const ctx = document.getElementById('dateChart').getContext('2d');

    // Destroy existing chart instance if it exists
    if (dateChart) {
        dateChart.destroy();
    }

    // Create a unique list of document names
    const documentNames = [...new Set(data.map(point => point.doc))];

    const presentData = data
        .filter(point => point.g2_present)
        .map(point => ({
            x: new Date(point.date), // X-axis value (date)
            y: documentNames.indexOf(point.doc), // Use mapped index for Y-axis
            docId: point.doc // Store docId for tooltip
        }));

    const absentData = data
        .filter(point => !point.g2_present)
        .map(point => ({
            x: new Date(point.date), // X-axis value (date)
            y: documentNames.indexOf(point.doc), // Use mapped index for Y-axis
            docId: point.doc // Store docId for tooltip
        }));

    // Create a new chart instance
    dateChart = new Chart(ctx, {
        type: 'scatter', // or 'line'
        data: {
            datasets: [
                {
                    label: 'Forged document', // Label for points where g2_present is true
                    data: presentData,
                    pointBackgroundColor: '#48B7B7', // Set color for these points
                    pointRadius: 5, // Size of points
                },
                {
                    label: 'Authentic document', // Label for points where g2_present is false
                    data: absentData,
                    pointBackgroundColor: '#9162F1', // Set color for these points
                    pointRadius: 5, // Size of points
                }
            ]
        },
        options: {
            scales: {
                x: {
                    type: 'time', // Use time scale for x-axis
                    title: {
                        display: true,
                        text: 'Year of publication',
                    },
                },
                y: {
                    type: 'linear', // Keep linear scale for numeric Y values
                    title: {
                        display: true,
                        text: 'Document ',
                    },
                    ticks: {
                        callback: function(value) {
                            return documentNames[value]; // Convert index back to document name for display
                        }
                    }
                }
            },
            plugins: {
                legend: {
                    display: true, // Hide legend if not needed
                    position: 'top', // Position legend at the top
                },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            const year = tooltipItem.raw.x.getFullYear(); // Get the year from x value
                            const docId = tooltipItem.raw.docId; // Get the docId
                            return [
                                `Year of publication: ${year}`,
                                `Doc ID: ${docId}`
                            ];
                        }
                    }
                }
            }
        }
    });
}


// Fetch and create chart
fetch('/date-visualization')
    .then(response => {
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
    })
    .then(data => {
        createDateChart(data);
    })
    .catch(error => {
        console.error('Error fetching date visualization data:', error);
    });
</script>


    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>


</body>

</html>
